<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" href="__PUBLIC__/LibraryWeb/image/favicon.ico">
	<title>回收站</title>
	<link rel="stylesheet" href="">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css">
	<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<!-- 公共样式 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/login.css">
	<!-- 移动端 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/move.css" media="screen and (max-width:768px)">
	<!-- ipda端 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/ipda.css" media="screen and (max-width:992px) and (min-width:768px)">
	<!-- pc端 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/pc.css" media="screen and (min-width:992px)">

	<script type="text/javascript" src="__PUBLIC__/LibraryWeb/js/common.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$("#table_page").bootstrapTable({
				height: $(window).height() - 120,
				pageSize:10,
				pageList:[10],
				columns:[{
					field:'id',
					title:'序号'
				},{
					field:'username',
					title:'用户名'
				},{
					field:'password',
					title:'密码'
				},{
					field:'logintime',
					title:'登录时间'
				},{
					field:'offlinetime',
					title:'离线时间'
				},{
					field:'registertime',
					title:'注册时间'
				},{
					field:'lastchangepsd',
					title:'上次修改密码时间'
				},{
					field:'deletetime',
					title:'删除时间'
				},{
					field:'root',
					title:'是否管理员'
				},{
					field:'action',
					title:'操作'
				}]
			});
			    //当表格内容的高度小于外面容器的高度，容器的高度设置为内容的高度，相反时容器设置为窗口的高度-160
    if ($(".fixed-table-body table").height() < $(".fixed-table-container").height()) {
        $(".fixed-table-container").css({ "padding-bottom": "0px", height: $(".fixed-table-body table").height() + 10 });
        // 是当内容少时，使用搜索功能高度保持不变
        $('#table_page').bootstrapTable('resetView', { height: "auto" });
    } else {
        $(".fixed-table-container").css({ height: $(window).height() - 160 });
    }
		});
		$('#table_page').bootstrapTable("hideLoading");
	</script>
	<style type="text/css">
		.fixed-table-border{
			display: none;
		}
		.table{
			text-align: center;
		}
		.bootstrap4{
			margin-top: 66px;
		}
	</style>

</head>
<body>
	<!-- 导航条开始 -->
	<div class="nav">
		<div class="warp">
			<div class="logo"></div>
			<div class="search">
				<form action="" method="post">
					<input type="text" placeholder="请输入用户名" class="ipt" name="search">
					<button class="fa fa-search"></button>
				</form>
			</div>
			<div class="nav-bar">
				<ul>
					<li class="nav-active"><a href="{:U('index/index')}">首页</a></li>
					<li><a href=""><?php echo "当前用户：".session("username");?></a></li>
				</ul>
			</div>
			<div class="btn"><i class="fa fa-bars" aria-hidden="true"></i></div>
		</div>
	</div>
<!-- 导航条结束 -->
<div>
	<table class="table" id="table_page"  data-pagination="true" data-side-pagination="client" data-page-size="10">
		<tbody>
			<volist name="recovery" id="user" key="k">
			<tr>
				<td>{$k}</td>
				<td name="username">{$user.username}</td>
				<td name="password">{$user.password}</td>
				<td name="logintime">{$user.logintime}</td>
				<td name="offlinetime">{$user.offlinetime}</td>
				<td name="registertime">{$user.registertime}</td>
				<td name="lastchangepsd">{$user.lastchangepsd}</td>
				<td name="root">{$user.root}</td>
				<td name="deletetime">{$user.deletetime}</td>
				<td>
					<a href="{:U('recovery/ReturnUser')}?id={$user.id}">恢复</a>
					<a href="{:U('recovery/DeleteRecoveryUser')}?id={$user.id}">删除</a>
				</td>
			</tr>
			</volist>
		</tbody>
	</table>
	<div class="text-center">
		<a href="{:U('selectUser/Display_User')}?id=addUser">添加</a>
		<a href="{:U('recovery/DeleteAll')}">清空回收站</a>
	</div>
</div>
</body>
</html>

