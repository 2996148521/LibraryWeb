<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" href="__PUBLIC__/LibraryWeb/image/favicon.ico">
	<title>图书信息</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css">
	<!-- 公共样式 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/login.css">
	<!-- 移动端 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/move.css" media="screen and (max-width:768px)">
	<!-- ipda端 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/ipda.css" media="screen and (max-width:992px) and (min-width:768px)">
	<!-- pc端 -->
	<link rel="stylesheet" href="__PUBLIC__/LibraryWeb/css/pc.css" media="screen and (min-width:992px)">
	<script type="text/javascript" src="__PUBLIC__/LibraryWeb/js/common.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$("#table_page").bootstrapTable({
				height: $(window).height() - 120,
				pageSize:10,
				pageList:[10],
				columns:[{
					field:'id',
					title:'序号'
				},{
					field:'isbn',
					title:'ISBN编码'
				},{
					field:'name',
					title:'名称'
				},{
					field:'author',
					title:'作者'
				},{
					field:'press',
					title:'出版社'
				},{
					field:'date',
					title:'出版日期'
				},{
					field:'num',
					title:'数量'
				},{
					field:'price',
					title:'租金'
				},{
					field:'occupy',
					title:'占用'
				},{
					field:'action',
					title:'操作'
				}]
			});
			    //当表格内容的高度小于外面容器的高度，容器的高度设置为内容的高度，相反时容器设置为窗口的高度-160
    if ($(".fixed-table-body table").height() < $(".fixed-table-container").height()) {
        $(".fixed-table-container").css({ "padding-bottom": "0px", height: $(".fixed-table-body table").height() + 10 });
        // 是当内容少时，使用搜索功能高度保持不变
        $('#table_page').bootstrapTable('resetView', { height: "auto" });
    } else {
        $(".fixed-table-container").css({ height: $(window).height() - 160 });
    }
    // $("#header").load("__PUBLIC__/LibraryWeb/html/header.html");
		});
		$('#table_page').bootstrapTable("hideLoading");

	</script>
	<style type="text/css">
		.fixed-table-border{
			display: none;
		}
		.table{
			text-align: center;
		}
	/*	.bootstrap4{
			margin-top: 66px;
		}*/
	</style>

</head>
<body>
<!-- 导航条开始 -->
<div id="header"></div>
	<div class="nav">
		<div class="warp">
			<div class="logo"></div>
			<div class="search">
				<form action="" method="post">
					<input type="text" placeholder="请输入ISBN编码、书名或作者" class="ipt" name="search">
					<button class="fa fa-search"></button>
				</form>
			</div>
			<div class="nav-bar">
				<ul>
					<li class="nav-active"><a href="{:U('index/index')}">首页</a></li>
					<li><a href="">公告</a></li>
					<li><a href=""><?php echo "当前用户：".session("username");?></a></li>
				</ul>
			</div>
			<div class="btn"><i class="fa fa-bars" aria-hidden="true"></i></div>
		</div>
	</div>
<!-- 导航条结束 -->
<div style="margin-top: 66px;">
	<table class="table" border="0" callpadding="0" cellspacing="0">
		<form action="{:U('AddBook')}" method="post">
			<tr>
				<td>添加：</td>
				<td><input type="text" oninput="value=value.replace(/[^\d]/g,'')" placeholder="ISBN编码" name="isbn"></td>
				<td><input type="text" placeholder="名称" name="mincheng"></td>
				<td><input type="text" placeholder="作者" name="zuozhe"></td>
				<td><input type="text" placeholder="出版社" name="chubanshe"></td>
				<td><input type="text" placeholder="出版日期" name="chubanriqi"></td>
				<td><input type="text" placeholder="数量" name="num"></td>
				<td><input type="text" placeholder="租金" name="zujin"></td>
				<td><input type="submit" value="提交"></td>
			</tr>
		</form>
</table>
</div>

<div>
	<table class="table" id="table_page" data-pagination="true" data-side-pagination="client" data-page-size="10">
		<tbody>
			<volist name="arr" id="info" key="k">
			<tr>
				<td>{$k}</td>
				<td name="isbn">{$info.book_isbn}</td>
				<td name="name">{$info.book_name}</td>
				<td name="author">{$info.book_author}</td>
				<td name="press">{$info.book_press}</td>
				<td name="date">{$info.book_date}</td>
				<td name="num">{$info.book_num}</td>
				<td name="price">{$info.book_price}</td>
				<td name="occupy">{$info.book_occupy}</td>
				<td>
					<a href="{:U('adminConsole/IntoUpdate')}?id={$info.id}">更改</a>
					<a href="{:U('adminConsole/DeleteBook')}?id={$info.id}">删除</a>
				</td>
			</tr>
			</volist>
		</tbody>
	</table>
<!-- 	<div class="text-center">
		<a href="{:U('adminConsole/IntoAdd')}">添加</a>
	</div> -->
</div>
</body>
</html>

